<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZfP Operator Audit - Schaeffler</title>
    
    <!-- CSS Imports -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/audit-buttons.css">
    <link rel="stylesheet" href="css/controls.css">
    <link rel="stylesheet" href="css/status.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/questions.css">
    <link rel="stylesheet" href="css/mobile.css">
    <link rel="stylesheet" href="css/report.css">
    <link rel="stylesheet" href="css/dark-mode.css">
</head>
<body>
    <!-- CUSTOM MODAL -->
    <div id="customModal" class="custom-modal">
        <div class="custom-modal-content">
            <div id="modalMessage">M√∂chten Sie fortfahren?</div>
            <div class="custom-modal-buttons">
                <button id="modalCancelBtn" class="custom-modal-btn cancel">Nein</button>
                <button id="modalConfirmBtn" class="custom-modal-btn confirm">Ja</button>
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>ZfP Operator Audit</h1>
            <div class="subtitle">Zerst√∂rungsfreie Pr√ºfverfahren - Operator Qualifizierung</div>
        </header>

        <!-- AUDIT AUSWAHL -->
        <div id="auditSelection" class="audit-selection active">
            <h2>Pr√ºfverfahren ausw√§hlen:</h2>
            <div class="audit-buttons">
                <button class="audit-btn wirbelstrom" data-audit="wirbelstrom">
                    <div class="btn-icon">‚ö°</div>
                    <span>Wirbelstrompr√ºfung</span>
                    <div class="btn-progress" id="wirbelstromProgress">0%</div>
                </button>
                <button class="audit-btn magnetpulver" data-audit="magnetpulver">
                    <div class="btn-icon">üß≤</div>
                    <span>Magnetpulverpr√ºfung</span>
                    <div class="btn-progress" id="magnetpulverProgress">0%</div>
                </button>
                <button class="audit-btn nital" data-audit="nital">
                    <div class="btn-icon">üß™</div>
                    <span>Nital-√Ñtzen</span>
                    <div class="btn-progress" id="nitalProgress">0%</div>
                </button>
                <button class="audit-btn ultraschall" data-audit="ultraschall">
                    <div class="btn-icon">üì°</div>
                    <span>Ultraschallpr√ºfung</span>
                    <div class="btn-progress" id="ultraschallProgress">0%</div>
                </button>
            </div>
        </div>

        <!-- AUDIT CONTENT -->
        <div id="auditContent" class="audit-content">
            <!-- CONTROLS -->
            <div class="controls-row-1">
                <button class="btn-back" id="backBtn">‚Üê Zur√ºck</button>
                <button class="btn-export" id="exportBtn">üìÅ Export JSON</button>
                <button class="btn-audit-load" id="auditLoadBtn">üìÇ Audit Laden</button>
                <button class="btn-authorization" id="authorizationBtn">üìã Autorisierung</button>
            </div>

            <div class="controls-row-2">
                <button class="btn-report" id="reportBtn">üìä Auditbericht</button>
                <button class="btn-desktop" id="toggleViewBtn">üì± Mobile</button>
                <button class="btn-danger" id="resetBtn">üóëÔ∏è Reset Audit</button>
                <button class="btn-success" id="uploadQuestionsBtn">üìÑ Fragenkatalog</button>
            </div>

            <!-- KOPFDATEN DESKTOP -->
            <div class="header-section desktop-view" id="desktopHeaderSection">
                <h3>
                    <span>üìÑ Audit-Kopfdaten</span>
                    <button class="toggle-header-btn" id="desktopToggleHeader">Ausblenden</button>
                </h3>
                <div class="header-content" id="desktopHeaderContent">
                    <div class="header-grid">
                        <div class="header-group">
                            <h4>Operator</h4>
                            <input type="text" class="header-input" id="operatorName" placeholder="Name">
                            <input type="text" class="header-input" id="operatorNumber" placeholder="Mitarbeiter-Nr.">
                            <input type="text" class="header-input" id="operatorCert" placeholder="Zertifikat">
                            <input type="text" class="header-input" id="operatorDept" placeholder="Abteilung">
                        </div>
                        <div class="header-group">
                            <h4>Auditor (Level II)</h4>
                            <input type="text" class="header-input" id="auditorName" placeholder="Name">
                            <input type="text" class="header-input" id="auditorDept" placeholder="Abteilung">
                            <input type="text" class="header-input" id="auditorCert" placeholder="Zertifikat">
                            <input type="text" class="header-input" id="auditorPhone" placeholder="Telefon">
                        </div>
                        <div class="header-group">
                            <h4>Supervisor (Level III)</h4>
                            <input type="text" class="header-input" id="approverName" placeholder="Name">
                            <input type="text" class="header-input" id="approverDept" placeholder="Abteilung">
                            <input type="text" class="header-input" id="approverCert" placeholder="Zertifikat">
                            <input type="text" class="header-input" id="approverPhone" placeholder="Telefon">
                        </div>
                        <div class="header-group">
                            <h4>Pr√ºfungsdetails</h4>
                            <input type="text" class="header-input" id="reportNumber" placeholder="Pr√ºfbericht-Nr.">
                            <input type="text" class="header-input" id="partType" placeholder="Teiletype">
                            <input type="text" class="header-input" id="externalStandard" placeholder="Externe Norm">
                            <input type="text" class="header-input" id="sStandard" placeholder="S-Standard">
                            <input type="text" class="header-input" id="workInstruction" placeholder="Lokale Instruktion">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mobile Kopfdaten -->
            <div class="header-section mobile-view mobile-header-section collapsed" id="mobileHeaderSection">
                <h3>
                    <span>üìÑ Audit-Daten</span>
                    <button class="toggle-header-btn" id="mobileToggleHeader">Einblenden</button>
                </h3>
                <div class="header-content" id="mobileHeaderContent">
                    <div class="header-grid">
                        <div class="header-group">
                            <h4>Operator</h4>
                            <input type="text" class="header-input" id="mobileOperatorName" placeholder="Name">
                            <input type="text" class="header-input" id="mobileOperatorNumber" placeholder="Mitarbeiter-Nr.">
                            <input type="text" class="header-input" id="mobileOperatorCert" placeholder="Zertifikat">
                            <input type="text" class="header-input" id="mobileOperatorDept" placeholder="Abteilung">
                        </div>
                        <div class="header-group">
                            <h4>Auditor (Level II)</h4>
                            <input type="text" class="header-input" id="mobileAuditorName" placeholder="Name">
                            <input type="text" class="header-input" id="mobileAuditorDept" placeholder="Abteilung">
                            <input type="text" class="header-input" id="mobileAuditorCert" placeholder="Zertifikat">
                            <input type="text" class="header-input" id="mobileAuditorPhone" placeholder="Telefon">
                        </div>
                        <div class="header-group">
                            <h4>Freigeber (Level III)</h4>
                            <input type="text" class="header-input" id="mobileApproverName" placeholder="Name">
                            <input type="text" class="header-input" id="mobileApproverDept" placeholder="Abteilung">
                            <input type="text" class="header-input" id="mobileApproverCert" placeholder="Zertifikat">
                            <input type="text" class="header-input" id="mobileApproverPhone" placeholder="Telefon">
                        </div>
                        <div class="header-group">
                            <h4>Pr√ºfungsdetails</h4>
                            <input type="text" class="header-input" id="mobileReportNumber" placeholder="Pr√ºfbericht-Nr.">
                            <input type="text" class="header-input" id="mobilePartType" placeholder="Teiletype">
                            <input type="text" class="header-input" id="mobileExternalStandard" placeholder="Externe Norm">
                            <input type="text" class="header-input" id="mobileSStandard" placeholder="S-Standard">
                            <input type="text" class="header-input" id="mobileWorkInstruction" placeholder="Lokale Instruktion">
                        </div>
                    </div>
                </div>
            </div>

            <!-- STATUSLEISTE -->
            <div class="audit-status">
                <div class="status-header">
                    <div class="status-text">
                        Status: <strong id="auditStatusText">In Bearbeitung</strong>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                            <div class="progress-text" id="progressText">0%</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Gesamtergebnis -->
            <div id="finalResult" class="final-result">
                <div id="resultIcon" style="font-size: 1.2em; margin-bottom: 5px;"></div>
                <div id="resultText" style="font-size: 0.9em;"></div>
            </div>

            <!-- Desktop Ansicht -->
            <div class="desktop-view" id="desktopView">
                <div id="auditSections"></div>
            </div>

            <!-- Mobile Ansicht -->
            <div class="mobile-view" id="mobileView">
                <div class="mobile-section-selector" id="sectionSelector"></div>
                <div id="mobileQuestions"></div>
                <div class="mobile-nav">
                    <button class="btn-secondary" id="prevBtn">‚Üê Zur√ºck</button>
                    <span id="mobileCounter">1/1</span>
                    <button class="btn-secondary" id="nextBtn">Weiter ‚Üí</button>
                </div>
            </div>
        </div>

        <footer>
            <p>Operator Audit Tool - Schaeffler Technologies AG & Co. KG</p>
            <div class="version-info">Version AA - 10.01.2026</div>
            <div class="creator-info">Ersteller: H√§usner Daniel, WI/SW2-PQT</div>
        </footer>
    </div>

    <!-- BERICHTS OVERLAY -->
    <div id="reportOverlay" class="report-overlay">
        <div class="report-container" id="reportContainer">
            <!-- Aktions-Buttons -->
            <div class="report-action-buttons">
                <button class="report-action-btn print-btn" onclick="printFullReport()">üñ®Ô∏è</button>
                <button class="report-action-btn close-btn" onclick="closeReport()">‚úï</button>
            </div>
            <!-- Bericht wird hier dynamisch eingef√ºgt -->
        </div>
    </div>

    <!-- AUTORISIERUNGS OVERLAY -->
    <div id="authorizationOverlay" class="report-overlay">
        <div class="report-container" id="authorizationContainer">
            <!-- Aktions-Buttons -->
            <div class="report-action-buttons">
                <button class="report-action-btn print-btn" onclick="printFullAuthorization()">üñ®Ô∏è</button>
                <button class="report-action-btn close-btn" onclick="closeAuthorization()">‚úï</button>
            </div>
            <!-- Autorisierung wird hier dynamisch eingef√ºgt -->
        </div>
    </div>

    <!-- VERSTECKTE INPUTS -->
    <input type="file" id="fileLoader" accept=".json" style="display: none;">
    <input type="file" id="questionsLoader" accept=".json" style="display: none;">

    <!-- JavaScript Imports -->
    <script src="data/audit-types.js"></script>
    <script src="data/constants.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/modal.js"></script>
    <script src="js/audit-manager.js"></script>
    <script src="js/render.js"></script>
    <script src="js/mobile.js"></script>
    <script src="js/images.js"></script>
    <script src="js/report.js"></script>
    <script src="js/authorization.js"></script>
    <script src="js/main.js"></script>
</body>
</html>